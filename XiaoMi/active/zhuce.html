<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="../css/zhuce.css"/>
	</head>
	<body>
		<div class="box">
			<form action="">
				<img src="../img/3.png"/>
				<h2>注册小米账号</h2>
				<p class="p1">国家地区</p>
				<select name="">
					<option value="">中国</option>
					<option value="">美国</option>
					<option value="">英国</option>
					<option value="">意大利</option>
				</select>
				<p>成功注册帐号后，国家/地区将不能被修改</p>
				<p class="p2">手机号码</p>
				<input type="text" id="txt" value="" placeholder="请输入手机号"/>
				<div id="info">
					
				</div>
				<input type="button" id="btn" value="立即注册" />
			</form>
			<input type="radio" name="" id="rad" value="" /><span id="spa">
				注册帐号即表示您同意并愿意遵守小米 <a href="#" style="font-weight: bold;color: #000000;">用户协议</a>和 <a href="#" style="font-weight: bold;color: #000000;">隐私政策</a>
			</span>
		</div>
		<div class="bottom">
				<ul>
					<li><a href="">简体|</a></li>
					<li><a href="">繁体|</a></li>
					<li><a href="">English|</a></li>
					<li><a href="">常见问题|</a></li>
					<li><a href="">隐私政策</a></li>
				</ul><br />
				<p id="last">小米公司版权所有-京ICP备10046444-京公网安备11010802020134号-京ICP证110507号</p>
		</div>

	</body>
</html>
<script type="text/javascript">
	//对手机号进行正则验证
	var txt=document.getElementById('txt');
	var btn=document.getElementById('btn');
	var info=document.getElementById('info');
	var rad=document.getElementById('rad');
	
	var reg=/^1[3-9]\d{9}$/;
	btn.onclick=function(){
		info.innerHTML='';
		var value=Number(txt.value);
		if(value==''){
			info.innerHTML='请输入手机号';
			info.style.color='red';
			return;
		}
		if(!rad.checked){
			info.innerHTML='请同意用户政策和隐私条款';
			info.style.color='red';
			return;
		}
		if(!reg.test(value)){
			info.innerHTML='手机号码格式有误';
			info.style.color='red';
		}
		if(reg.test(value)){
//			var arr=[];
//			if(localStorage.number){
//				arr = eval(localStorage.number);
//				for (var i=0;i<arr.length;i++) {
//					if(value==arr[i].number){
//						alert("此手机号已经被注册");
//						return;
//					}
//				}
//			}
//			var number={'number':value};
//			arr.push(number);
//			localStorage.number=JSON.stringify(arr);
//			alert('注册成功');
//			localStorage.setItem('number',JSON.stringify(carlist));


//			var arr=[];
			if(localStorage.number){
				arr = eval(localStorage.number);
				for (var i=0;i<arr.length;i++) {
					if(value==arr[i].number){
						alert("此手机号已经被注册");
						return;
					}
				}
			}
//			var number={'number':value};
//			arr.push(number);
//			localStorage.number=JSON.stringify(arr);
			alert('注册成功');
			//设置密码并携带number
			location.href='zhuceMima.html?number='+value;
		}
		
	}

</script>
